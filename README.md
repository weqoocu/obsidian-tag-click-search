# Tag Click Search - 标签点击搜索插件

## 功能简介

这是一个为 Obsidian 开发的插件，实现了类似 TagFolder 插件中的 "Search tags inside TagFolder when clicking tags" 功能。

### 主要功能

1. **点击标签自动搜索**
   - 点击阅读模式下的标签链接（`#标签名`）
   - 点击编辑模式下的标签（包括正在编辑的标签）
   
2. **智能显示结果**
   - 自动打开搜索结果面板
   - 列出所有包含该标签的笔记
   - 按笔记的 `title` 属性（frontmatter）排序
   
3. **中文友好**
   - 完美支持中文标签搜索
   - 中文排序正确

## 安装方法

### 方法一：手动安装（当前）

插件文件已经放置在正确的位置：
```
.obsidian/plugins/tag-click-search/
├── manifest.json
├── main.js
└── README.md
```

现在只需要：
1. 打开 Obsidian 设置 → 社区插件
2. 找到 "Tag Click Search" 插件
3. 启用该插件

### 方法二：重新加载 Obsidian

如果插件没有出现在列表中：
1. 完全关闭 Obsidian
2. 重新打开 Obsidian
3. 在设置中启用插件

## 使用方法

### 基本使用

1. **在阅读模式下**：直接点击任何标签链接（如 `#项目管理`）
2. **在编辑模式下**：点击编辑器中的标签文本
3. 插件会自动在右侧边栏打开搜索结果面板
4. 显示包含该标签的所有笔记，按 title 排序

### 快捷键

- 可以在 Obsidian 设置 → 快捷键中为 "搜索当前光标处的标签" 命令设置快捷键

### 排序规则

- 优先使用笔记 frontmatter 中的 `title` 字段
- 如果没有 `title` 字段，则使用文件名
- 支持中文、数字的自然排序

## 工作原理

1. **标签检测**：
   - 在阅读模式：监听 `a.tag[href^="#"]` 的点击
   - 在编辑模式：监听 `.cm-hashtag` 的点击

2. **搜索逻辑**：
   - 遍历所有 markdown 文件
   - 检查文件的 `tags` 和 `frontmatter.tags`
   - 匹配标签名称（忽略大小写）

3. **结果显示**：
   - 创建自定义视图显示搜索结果
   - 按 title 属性进行中文友好的排序
   - 点击结果项打开对应的笔记

## 与 TagFolder 的区别

| 功能 | TagFolder | Tag Click Search |
|------|-----------|------------------|
| 点击标签搜索 | ✅ | ✅ |
| 按 title 排序 | ✅ | ✅ |
| 文件夹视图 | ✅ | ❌ |
| 标签管理 | ❌ | ❌ |
| 独立运行 | ❌ | ✅ |
| 与 Tag Wrangler 兼容 | ❌ | ✅ |

## 配置选项

当前版本暂无配置选项，未来版本可能添加：
- 是否在新面板打开结果
- 排序方式选择
- 显示文件数量
- 自定义样式

## 兼容性

- **最低 Obsidian 版本**：0.15.0
- **桌面端**：✅ 支持
- **移动端**：✅ 支持
- **与其他插件兼容**：
  - ✅ Tag Wrangler
  - ✅ Dataview
  - ✅ TagFolder（可同时使用）

## 故障排除

### 插件不工作

1. 检查插件是否已启用
2. 尝试重新加载 Obsidian
3. 查看控制台是否有错误信息（Ctrl+Shift+I）

### 搜索结果不准确

1. 确保文件的标签格式正确
2. 检查 frontmatter 中的 tags 字段格式
3. 尝试重建元数据缓存：设置 → 文件与链接 → 重建索引

### 排序不正确

1. 检查 frontmatter 中是否有 `title` 字段
2. 确保 title 字段是字符串类型

## 开发计划

- [ ] 添加配置面板
- [ ] 支持嵌套标签的层级显示
- [ ] 添加文件创建时间、修改时间等排序选项
- [ ] 支持多标签组合搜索
- [ ] 添加搜索历史记录

## 贡献

如果您发现 bug 或有功能建议，欢迎：
1. 提交 Issue
2. 发起 Pull Request
3. 联系作者

## 许可证

MIT License

## 致谢

- 感谢 TagFolder 插件提供的灵感
- 感谢 Tag Wrangler 插件的标签管理功能
- 感谢 Obsidian 社区的支持

---

**Enjoy! 🎉**
